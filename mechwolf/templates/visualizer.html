<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>{{title | title}}</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>

<body>
	<main role="main" class="container">
		<h1>{{title | title}}</h1>
		<br>
		<br>
		<div id="timeline" style="height: {{100 * procedures|length}}px;"></div>
	</main>

	<script charset="utf-8">
		google.charts.load('current', {
			'packages': ['timeline']
		});
		google.charts.setOnLoadCallback(drawChart);

		function drawChart() {
			var container = document.getElementById('timeline');
			var chart = new google.visualization.Timeline(container);
			var dataTable = new google.visualization.DataTable();

			dataTable.addColumn({
				type: 'string',
				id: 'Component'
			});
			dataTable.addColumn({
				type: 'string',
				id: 'Setting'
			});
			dataTable.addColumn({
				type: 'date',
				id: 'Start'
			});
			dataTable.addColumn({
				type: 'date',
				id: 'End'
			});
			dataTable.addRows([{ %
					for procedure in procedures %
				}
				["{{procedure['component'].name}}", "{{procedure['params'] | safe}}", new Date(0, 0, 0, 0, 0, {
					{
						procedure["start"].to_base_units().magnitude
					}
				}), new Date(0, 0, 0, 0, 0, {
					{
						procedure["stop"].to_base_units().magnitude
					}
				})],
				{ % endfor %
				}
			]);
			chart.draw(dataTable, {
				avoidOverlappingGridLines: false
			});
		}
	</script>
</body>

</html>